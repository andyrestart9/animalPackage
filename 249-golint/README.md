# gofmt, go vet, golint  是什麼？

ChatGPT said:
在 Go 生态里，常见的三款“辅助工具”分别负责代码格式化、静态检查和风格审查：

1. gofmt
    作用：自动格式化 Go 代码，让所有源文件都遵循统一的缩进、对齐和空白规范。

    特点：

    “格式即规范”：只要你运行了 gofmt，大家的代码排版就一致了，无需讨论空格、Tab、对齐等细节。

    内置于 Go 工具链：不需要额外安装。

    常用命令：

    ```bash
    # 将格式化结果打印到 stdout（不修改文件）

    gofmt path/to/file.go

    # 直接把格式化结果写回源文件

    gofmt -w path/to/dir

    # 对整个项目递归格式化

    find . -name '*.go' | xargs gofmt -w
    ```

    集成建议：

    在编辑器中开“保存时自动 run gofmt”；

    在 CI 里加一条检查 gofmt -l .，如果有输出就报错。

2. go vet
    作用：对你的 Go 代码做更深入的静态分析，发现一些“合法但很可能是错误”的用法。

    检查范畴（示例）：

    调用 Printf 家族时，参数与格式串不匹配

    把错误值（error）丢弃却要在后面用

    不可达的代码、无效的结构体标签

    协程泄漏模式（例如 for range 里用闭包捕获循环变量）

    常用命令：

    ```bash

    # 针对当前模块（module）或当前目录

    go vet ./...

    # 也可以指定具体包

    go vet my/module/pkg
    ```

    集成建议：

    把它当成“比编译更严格一步”的检查，通常在编译无错后再运行 go vet；

    在 CI 流水线里，把 go vet ./... 报错当作构建失败。

3. golint
    作用：检查代码是否符合 Go 社区的“风格约定” （idiomatic Go），比如注释风格、命名规范、错误消息首字母小写等。

    来源：由官方团队托管在 golang.org/x/lint，需要单独安装：

    ```bash
    go install golang.org/x/lint/golint@latest
    ```

    检查要点（示例）：

    包注释：包级注释要写在 package 语句上面，并且开头要写包名

    导出 API：导出函数、类型、变量都要有注释，且注释首字母要与标识符匹配

    命名风格：错误消息不应以大写字母或标点符号结尾；ID 应该写成 ID 而非 Id

    常用命令：

    ```bash

    # 对当前目录执行 lint

    golint ./...

    # 只检查某个包

    golint my/module/pkg
    ```

    集成建议：

    把它作为“风格建议”来使用，不一定要所有提示都强制改；

    CI 可以把严重的风格违例（如缺注释）当作警告或错误。

总结
gofmt → 格式化（自动、必做）

go vet → 静态检查（发现潜在 bug，强烈推荐）

golint → 风格审查（保持代码 idiomatic，可选程度高一点）

把这三者组合到 IDE、pre-commit 钩子和 CI 流程里，就能大幅提升 Go 代码的质量和可维护性。

## fmt, vet, lint 是什麼意思？

fmt：是 “format” 的缩写。在 Go 中，gofmt（或编辑器里的“format on save”功能）会根据官方规范自动整理代码的缩进、空格和对齐，确保所有人写出来的格式都一致。

vet：来自英文 “veterinary” 的同源义 “to vet”——在这里可理解为“审核、审查”。go vet 会对编译通过的代码做更深入的静态检查，找出可能的错误或不规范用法（比如格式化字符串和参数不匹配、无效的标签、闭包捕获循环变量等）。

lint：原意是“羊毛、棉花上的绒毛”，在程序设计里引申为“拣出细小的瑕疵”。golint 是一款静态风格审查工具，会根据社区公认的 Go 代码约定（注释、命名、错误消息样式等）给出建议，帮助你写出更 idiomatic（惯用、符合习惯）的 Go 代码。
